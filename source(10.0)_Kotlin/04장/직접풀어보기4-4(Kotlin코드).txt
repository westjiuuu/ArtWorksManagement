package com.cookandroid.self4_4

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.view.View
import android.widget.Button
import android.widget.CompoundButton
import android.widget.ImageView
import android.widget.RadioButton
import android.widget.RadioGroup
import android.widget.Switch
import android.widget.TextView

class MainActivity : AppCompatActivity() {

    lateinit var text1 : TextView
    lateinit var text2 : TextView
    lateinit var switchAgree : Switch
    lateinit var rGroup1 : RadioGroup
    var  radioArray = ArrayList<RadioButton>(3)
    lateinit var imgPet : ImageView
    lateinit var btnQuit : Button
    lateinit var btnRerun : Button

    public override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        title = "안드로이드 사진 보기"

        // 위젯을 변수에 대입
        text1 = findViewById<View>(R.id.Text1) as TextView
        switchAgree = findViewById<View>(R.id.switchAgree) as Switch

        text2 = findViewById<View>(R.id.Text2) as TextView
        rGroup1 = findViewById<View>(R.id.Rgroup1) as RadioGroup
        radioArray.add(findViewById<View>(R.id.Rdo80) as RadioButton)
        radioArray.add(findViewById<View>(R.id.Rdo90) as RadioButton)
        radioArray.add(findViewById<View>(R.id.Rdo100) as RadioButton)

        imgPet = findViewById<View>(R.id.ImgPet) as ImageView

        btnQuit = findViewById<View>(R.id.BtnQuit) as Button
        btnRerun = findViewById<View>(R.id.BtnRerun) as Button

        // 동의함 체크박스의 체크가 변경되면
        switchAgree.setOnCheckedChangeListener { compoundButton, b ->
                // 체크되면 모두 보이도록 설정
                if (switchAgree.isChecked == true) {
                    text2.visibility = android.view.View.VISIBLE
                    rGroup1.visibility = android.view.View.VISIBLE
                    imgPet.visibility = android.view.View.VISIBLE
                    btnQuit.visibility = android.view.View.VISIBLE
                    btnRerun.visibility = android.view.View.VISIBLE
                } else {
                    text2.visibility = android.view.View.INVISIBLE
                    rGroup1.visibility = android.view.View.INVISIBLE
                    imgPet.visibility = android.view.View.INVISIBLE
                    btnQuit.visibility = android.view.View.INVISIBLE
                    btnRerun.visibility = android.view.View.INVISIBLE
                }
            }

        // 라디오버튼을 클릭할 때, 이미지 뷰를 변경시킴 ==> 배열로 처리함.
        val draw = intArrayOf(R.drawable.oreo, R.drawable.pie, R.drawable.q10)

        for (i in radioArray.indices) {
            radioArray[i].setOnClickListener(View.OnClickListener { imgPet.setImageResource(draw[i]) })
        }

        // 종료 버튼을 클릭하면
        btnQuit.setOnClickListener { finish() }

        // 처음으로 버튼을 클릭하면
        btnRerun.setOnClickListener {
            text2.visibility = android.view.View.INVISIBLE
            rGroup1.visibility = android.view.View.INVISIBLE
            imgPet.visibility = android.view.View.INVISIBLE
            btnQuit.visibility = android.view.View.INVISIBLE
            btnRerun.visibility = android.view.View.INVISIBLE

            rGroup1.clearCheck()
            switchAgree.isChecked = false
        }

    }

}